#####
#
# testbed-github.yaml is designed to be a convenient config file that contains information pertaining to sonic-mgmt
# the information has been divided into the following groups: 
#   - device_groups 
#   - devices
#   - host_vars
#   - veos_groups
#   - veos
#   - testbed
#   - topology
#
# these groups when converted from yaml in python become dictionaries. 
# these dictionaries help generate files necessary for ansible to run test cases 
#
# where are files generated from: 
#   - device_groups generates: lab
#   - devices generates: fanout/secrets.yml, lab/secrets.yml, lab
#   - host_vars generates: <host_vars>.yml
#   - veos_groups generates: veos
#   - veos generates: main.yml, vm_host/creds.yml, sonic_lab_devices.csv, eos/creds.yml, veos
#   - testbed generates: testbed.csv
#   - topology generates: sonic_lab_links.csv
#
# output files created:
#   [1]  /group_vars/vm_host/main.yml
#   [2]  /group_vars/vm_host/creds.yml
#   [3]  /files/sonic_lab_devices.csv
#   [4]  /testbed.csv
#   [5]  /files/sonic_lab_links.csv
#   [6]  /group_vars/eos/creds.yml
#   [7]  /group_vars/fanout/secrets.yml
#   [8]  /group_vars/lab/secrets.yml
#   [9]  /lab
#   [10] /veos
#   [11*] /host_vars/<host_var>.yml (where * is 0 or more)
#
#####
testbed_config:
    name: testbed-github
    alias: topologyGithubTestbed
    type: Physical 

# device_groups is a dictionary that contains the groups that devices and hosts belong to. it also contains global variables under 'vars'
# device_groups is to export the lab file
# cross references with devices for ansible_host value
device_groups:                              
    lab:
        children: [sonic, fanout]                                # source: sonic-mgmt/ansible/lab 
        vars:
            mgmt_subnet_mask_length: "24"                        # source: sonic-mgmt/ansible/lab
    sonic:
        children: [silverstone]                                  # source: sonic-mgmt/ansible/lab
    
    silverstone:
        host: [cel-silverstone-01]
        vars:
            hwsku: "Silverstone"
            iface_speed: '400000'
    fanout:
        host: [silverstone-fanout]                               # source: sonic-mgmt/ansible/lab
    ptf:
        host: [ptf1]                                             # source: sonic-mgmt/ansible/lab

# devices is a dictionary that contains all devices and hosts but not ptfs (ptfs found under testbed)
# devices is used to export sonic_lab_devices, fanout/secrets, lab/secrets, lab
# there are no cross references
devices:
    cel-silverstone-01:
        device_type: DevSonic
        hwsku: Silverstone
        alias: 
        credentials:
            username: 
            password: 
            enable_password: 
        ansible:
            ansible_host: 10.250.0.100/23
            ansible_ssh_user: admin
            ansible_ssh_pass: password

    silverstone-fanout:                           
        device_type: FanoutLeaf                     # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
        hwsku: Silverstone                          # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
        alias:             
        credentials:                        
            username: 
            password: 
        ansible:
            ansible_host: 10.250.0.235/23           # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
            ansible_ssh_user: admin                 # source: sonic-mgmt/ansible/group_vars/fanout/secrets.yml
            ansible_ssh_pass: password              # source: sonic-mgmt/ansible/group_vars/fanout/secrets.yml
            fanout_sonic_user: admin                # source: sonic-mgmt/ansible/group_vars/fanout/secrets.yml
            fanout_sonic_password: password         # source: sonic-mgmt/ansible/group_vars/fanout/secrets.yml

    ptf1:                           
        device_type: blank                          # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
        hwsku:                                      # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
        alias:             
        credentials:                        
            username: 
            password: 
        ansible:
            ansible_host: 10.250.0.110/23           # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
            ansible_ssh_user: root                  # source: sonic-mgmt/ansible/group_vars/fanout/secrets.yml
            ansible_ssh_pass: root                  # source: sonic-mgmt/ansible/group_vars/fanout/secrets.yml
    
    str-acs-serv-01:                                # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
        device_type: server                         # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
        hwsku: TestServ                             # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
        mgmt_subnet_mask_length: "24"               # source: sonic-mgmt/ansible/lab
        alias:         
        credentials:                        
            username:                 
            password:               
        ansible:
            ansible_host: 10.250.0.245/23           # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
            ansible_ssh_pass: 123456                # source: sonic-mgmt/ansible/group_vars/lab/secrets.yml
            ansible_become_pass: 123456             # source: sonic-mgmt/ansible/group_vars/lab/secrets.yml
            sonicadmin_user: admin                  # source: sonic-mgmt/ansible/group_vars/lab/secrets.yml
            sonicadmin_password: password           # source: sonic-mgmt/ansible/group_vars/lab/secrets.yml
            sonicadmin_initial_password: password   # source: sonic-mgmt/ansible/group_vars/lab/secrets.yml

    str-acs-serv-02:                                # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
        device_type: server                         # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
        hwsku: TestServ                             # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
        mgmt_subnet_mask_length: "24"               # source: sonic-mgmt/ansible/lab
        alias:         
        credentials:                        
            username:                 
            password:               
        ansible:
            ansible_host: 10.250.0.245/23           # source: sonic-mgmt/ansible/files/sonic_lab_devices-github.csv
            ansible_ssh_pass: 123456                # source: sonic-mgmt/ansible/group_vars/lab/secrets.yml
            ansible_become_pass: 123456             # source: sonic-mgmt/ansible/group_vars/lab/secrets.yml
            sonicadmin_user: admin                  # source: sonic-mgmt/ansible/group_vars/lab/secrets.yml
            sonicadmin_password: password           # source: sonic-mgmt/ansible/group_vars/lab/secrets.yml
            sonicadmin_initial_password: password   # source: sonic-mgmt/ansible/group_vars/lab/secrets.yml
# host_vars is a dictionary that contains all host_var values
# host_vars is used to export the host_vars files
# there are no cross references
host_vars:
    str-acs-serv-02:
        mgmt_bridge: br1                            # source: sonic-mgmt/host_vars
        mgmt_prefixlen: 23                          # source: sonic-mgmt/host_vars
        mgmt_gw: 10.250.0.1                         # source: sonic-mgmt/host_vars
        external_port: enp175s0f1                   # source: sonic-mgmt/host_vars        

    str-acs-serv-01:
        mgmt_bridge: br1                            # source: sonic-mgmt/host_vars
        mgmt_prefixlen: 23                          # source: sonic-mgmt/host_vars
        mgmt_gw: 10.250.0.1                         # source: sonic-mgmt/host_vars
        external_port: enp175s0f1                   # source: sonic-mgmt/host_vars        
# veos_groups is a dictionary that contains all veos groups
# veos_groups is used to generate the veos file
# veos_groups cross references veos (below)
veos_groups:
    servers:
        children: [server_1, server_2]              # source: sonic-mgmt/veos
        vars: 
            topologies: ['t0-sil', 't1-sil', 't1', 't1-lag', 't1-64-lag', 't1-64-lag-clet', 't0', 't0-56', 't0-52', 'ptf32', 'ptf64', 't0-64', 't0-64-32', 't0-116']  # source: sonic-mgmt/veos
    server_1:
        children: [vm_host_1, vms_1]                        # source: sonic-mgmt/veos
        vars:
            host_var_file: host_vars/STR-ACS-SERV-01.yml    # source: sonic-mgmt/veos
    server_2: 
        children: [vm_host_2, vms_2]                        # source: sonic-mgmt/veos
        vars:
            host_var_file: host_vars/STR-ACS-SERV-02.yml    # source: sonic-mgmt/veos
    eos:
        children: [vms_1, vms_2]                            # source: sonic-mgmt/veos
    vms_1:
        host: [VM0300, VM0301, VM0302, VM0303]              # source: sonic-mgmt/veos
    vms_2:
        host: [VM0400, VM0401, VM0402, VM0403, VM0404, VM0405, VM0406, VM0407, VM0408, VM0409, VM0410, VM0411, VM0412, VM0413, VM0414, VM0415, VM0416, VM0417, VM0418, VM0419, VM0420, VM0421, VM0422, VM0423, VM0424, VM0425, VM0426, VM0427, VM0428, VM0429, VM0430, VM0431]  # source: sonic-mgmt/veos
    vm_host:
        children: [vm_host_1, vm_host_2]                    # source: sonic-mgmt/veos
    vm_host_2:
        host: [STR-ACS-SERV-02]                             # source: sonic-mgmt/veos
    vm_host_1:
        host: [STR-ACS-SERV-01]                             # source: sonic-mgmt/veos

# veos is a dictionary that contains veos information as well as hosts of children groups from veos_groups
# veos is used to generate eos/creds, main.yml, vm_host/creds
# veos_groups pulls information from this dictionary
veos:                                               
    credentials:                        
        username:                 
        password:       
    root_path: veos-vm                                              # source: sonic-mgmt/ansible/group_vars/vm_host/main.yml
    vm_images_url: https://acsbe.blob.core.windows.net/vmimages     # source: sonic-mgmt/ansible/group_vars/vm_host/main.yml
    cd_image_filename: Aboot-veos-serial-8.0.0.iso                  # source: sonic-mgmt/ansible/group_vars/vm_host/main.yml
    hdd_image_filename: vEOS-lab-4.20.15M.vmdk                      # source: sonic-mgmt/ansible/group_vars/vm_host/main.yml
    skip_image_downloading: true                                    # source: sonic-mgmt/ansible/group_vars/vm_host/main.yml
    vm_console_base: 7100                                           # source: sonic-mgmt/ansible/group_vars/vm_host/main.yml
    memory: 2097152                                                 # source: sonic-mgmt/ansible/group_vars/vm_host/main.yml
    max_fp_num: 4                                                   # source: sonic-mgmt/ansible/group_vars/vm_host/main.yml
    ptf_bp_ip: 10.10.246.254/24
    ptf_bp_ipv6: fc0a::ff/64
    supported_vm_types: [ "veos", "ceos", "vsonic" ]
    sonic_image_filename: sonic-vs.img
    proxy_env:                                                   # source: sonic-mgmt/ansible/group_vars/vm_host/main.yml
        http_proxy: http://10.204.112.11:3128                    # source: sonic-mgmt/ansible/group_vars/vm_host/main.yml
        https_proxy: http://10.204.112.11:3128                   # source: sonic-mgmt/ansible/group_vars/vm_host/main.yml                    
    vm_host_ansible:
        ansible_user: clsnet                                     # source: sonic-mgmt/ansible/group_vars/vm_host/creds.yml
        ansible_password: 123456                                 # source: sonic-mgmt/ansible/group_vars/vm_host/creds.yml
        ansible_become_password: 123456                          # source: sonic-mgmt/ansible/group_vars/vm_host/creds.yml
    eos_ansible:
        ansible_user: admin                                      # source: sonic-mgmt/ansible/group_vars/eos/creds.yml
        ansible_password: 123456                                 # source: sonic-mgmt/ansible/group_vars/eos/creds.yml
    vms_1:
        VM0300: 
            ansible_host: 10.250.0.2
        VM0301: 
            ansible_host: 10.250.0.3
        VM0302: 
            ansible_host: 10.250.0.4
        VM0303: 
            ansible_host: 10.250.0.5
    vms_2:
        VM0400:                                                  # source: sonic-mgmt/ansible/veo:
            ansible_host: 10.250.0.10
        VM0401:
            ansible_host: 10.250.0.11
        VM0402:
            ansible_host: 10.250.0.12
        VM0403:
            ansible_host: 10.250.0.13
        VM0404:
            ansible_host: 10.250.0.14
        VM0405:
            ansible_host: 10.250.0.15
        VM0406:
            ansible_host: 10.250.0.16
        VM0407:
            ansible_host: 10.250.0.17
        VM0408:
            ansible_host: 10.250.0.18
        VM0409:
            ansible_host: 10.250.0.19
        VM0410:
            ansible_host: 10.250.0.20
        VM0411:
            ansible_host: 10.250.0.21
        VM0412:
            ansible_host: 10.250.0.22
        VM0413:
            ansible_host: 10.250.0.23
        VM0414:
            ansible_host: 10.250.0.24
        VM0415:
            ansible_host: 10.250.0.25
        VM0416:
            ansible_host: 10.250.0.26
        VM0417:
            ansible_host: 10.250.0.27
        VM0418:
            ansible_host: 10.250.0.28
        VM0419:
            ansible_host: 10.250.0.29
        VM0420:
            ansible_host: 10.250.0.30
        VM0421:
            ansible_host: 10.250.0.31
        VM0422:
            ansible_host: 10.250.0.32
        VM0423:
            ansible_host: 10.250.0.33
        VM0424:
            ansible_host: 10.250.0.34
        VM0425:
            ansible_host: 10.250.0.35
        VM0426:
            ansible_host: 10.250.0.36
        VM0427:
            ansible_host: 10.250.0.37
        VM0428:
            ansible_host: 10.250.0.38
        VM0429:
            ansible_host: 10.250.0.39
        VM0430:
            ansible_host: 10.250.0.40
        VM0431:
            ansible_host: 10.250.0.41

# testbed dictionary contains information about the testbed
# testbed is used to generate testbed.csv
# testbed dictionary does not cross reference with other files 
testbed:
    cel_sil_t0:
        group-name: ptf1                                    # source: sonic-mgmt/ansible/testbed.csv
        topo: t0-sil                                        # source: sonic-mgmt/ansible/testbed.csv
        ptf_image_name: docker-ptf                          # source: sonic-mgmt/ansible/testbed.csv
        ptf: ptf1
        ptf_ipv6:
        ptf_ip: 10.250.0.110/24                             # source: sonic-mgmt/ansible/testbed.csv
        server: server_1                                    # source: sonic-mgmt/ansible/testbed.csv
        vm_base: VM0300                                     # source: sonic-mgmt/ansible/testbed.csv
        dut: cel-silverstone-01                             # source: sonic-mgmt/ansible/testbed.csv
        inv_name: lab
        auto_recover: True
        comment: Tests CELESTICA SILVERSTONE                # source: sonic-mgmt/ansible/testbed.csv



# topology dictionary contains information about the topology (which device ports connect to each other)
# topology is used to generate sonic_lab_links
# topology dictionary does not cross reference with other files 
topology:                               # source: sonic-mgmt/ansible/files/sonic_lab_links.csv
    cel-silverstone-01:                 # source: sonic-mgmt/ansible/files/sonic_lab_links.csv
        interfaces:                     # DUT/ start device
            Ethernet0:
                EndDevice: silverstone-fanout
                EndPort: Ethernet0
                Bandwidth: 400000
                VlanID: 100
                VlanMode: Access
            Ethernet4: 
                EndDevice: silverstone-fanout
                EndPort: Ethernet4
                Bandwidth: 400000
                VlanID: 101
                VlanMode: Access
            Ethernet8:
                EndDevice: silverstone-fanout
                EndPort: Ethernet8
                Bandwidth: 400000
                VlanID: 102
                VlanMode: Access
            Ethernet12:
                EndDevice: silverstone-fanout
                EndPort: Ethernet12
                Bandwidth: 400000
                VlanID: 103
                VlanMode: Access
            Ethernet16:
                EndDevice: silverstone-fanout
                EndPort: Ethernet16
                Bandwidth: 400000
                VlanID: 104
                VlanMode: Access
            Ethernet20:
                EndDevice: silverstone-fanout
                EndPort: Ethernet20
                Bandwidth: 400000 
                VlanID: 105
                VlanMode: Access
            Ethernet24:
                EndDevice: silverstone-fanout
                EndPort: Ethernet24
                Bandwidth: 400000 
                VlanID: 106
                VlanMode: Access
            Ethernet28:
                EndDevice: silverstone-fanout
                EndPort: Ethernet28
                Bandwidth: 400000 
                VlanID: 107
                VlanMode: Access
            Ethernet32:
                EndDevice: silverstone-fanout
                EndPort: Ethernet32
                Bandwidth: 400000 
                VlanID: 108
                VlanMode: Access
            Ethernet36:
                EndDevice: silverstone-fanout
                EndPort: Ethernet36
                Bandwidth: 400000 
                VlanID: 109
                VlanMode: Access
            Ethernet40:
                EndDevice: silverstone-fanout
                EndPort: Ethernet40
                Bandwidth: 400000 
                VlanID: 110
                VlanMode: Access
            Ethernet44:
                EndDevice: silverstone-fanout
                EndPort: Ethernet44
                Bandwidth: 400000 
                VlanID: 111
                VlanMode: Access
            Ethernet48:
                EndDevice: silverstone-fanout
                EndPort: Ethernet48
                Bandwidth: 400000 
                VlanID: 112
                VlanMode: Access
            Ethernet52:
                EndDevice: silverstone-fanout
                EndPort: Ethernet52
                Bandwidth: 400000 
                VlanID: 113
                VlanMode: Access
            Ethernet56:
                EndDevice: silverstone-fanout
                EndPort: Ethernet56
                Bandwidth: 400000 
                VlanID: 114
                VlanMode: Access
            Ethernet60:
                EndDevice: silverstone-fanout
                EndPort: Ethernet60
                Bandwidth: 400000 
                VlanID: 115
                VlanMode: Access
            Ethernet64:
                EndDevice: silverstone-fanout
                EndPort: Ethernet64
                Bandwidth: 400000 
                VlanID: 116
                VlanMode: Access
            Ethernet68:
                EndDevice: silverstone-fanout
                EndPort: Ethernet68
                Bandwidth: 400000 
                VlanID: 117
                VlanMode: Access
            Ethernet72:
                EndDevice: silverstone-fanout
                EndPort: Ethernet72
                Bandwidth: 400000 
                VlanID: 118
                VlanMode: Access
            Ethernet76:
                EndDevice: silverstone-fanout
                EndPort: Ethernet76
                Bandwidth: 400000 
                VlanID: 119
                VlanMode: Access
            Ethernet80:
                EndDevice: silverstone-fanout
                EndPort: Ethernet80
                Bandwidth: 400000 
                VlanID: 120
                VlanMode: Access
            Ethernet84:
                EndDevice: silverstone-fanout
                EndPort: Ethernet84
                Bandwidth: 400000 
                VlanID: 121
                VlanMode: Access
            Ethernet88:
                EndDevice: silverstone-fanout
                EndPort: Ethernet88
                Bandwidth: 400000 
                VlanID: 122
                VlanMode: Access
            Ethernet92:
                EndDevice: silverstone-fanout
                EndPort: Ethernet92
                Bandwidth: 400000 
                VlanID: 123
                VlanMode: Access
            Ethernet96:
                EndDevice: silverstone-fanout
                EndPort: Ethernet96
                Bandwidth: 400000 
                VlanID: 124
                VlanMode: Access
            Ethernet100:
                EndDevice: silverstone-fanout
                EndPort: Ethernet100
                Bandwidth: 400000 
                VlanID: 125
                VlanMode: Access
            Ethernet104:
                EndDevice: silverstone-fanout
                EndPort: Ethernet104
                Bandwidth: 400000 
                VlanID: 126
                VlanMode: Access
            Ethernet108:
                EndDevice: silverstone-fanout
                EndPort: Ethernet108
                Bandwidth: 400000 
                VlanID: 127
                VlanMode: Access
            Ethernet112:
                EndDevice: silverstone-fanout
                EndPort: Ethernet112
                Bandwidth: 400000 
                VlanID: 128
                VlanMode: Access
            Ethernet116:
                EndDevice: silverstone-fanout
                EndPort: Ethernet116
                Bandwidth: 400000 
                VlanID: 129
                VlanMode: Access
            Ethernet120:
                EndDevice: silverstone-fanout
                EndPort: Ethernet120
                Bandwidth: 400000 
                VlanID: 130
                VlanMode: Access
#            Ethernet124:
#               EndDevice: silverstone-fanout
#               EndPort: Ethernet124
#               Bandwidth: 400000 
#               VlanID: 1712
#               VlanMode: Access
    silverstone-fanout:                        # source: sonic-mgmt/ansible/files/sonic_lab_links.csv
        interfaces:                            # DUT/ start device
            Ethernet124:
                EndDevice: str-acs-serv-01
                EndPort: enp175s0f1
                Bandwidth: 100000 
                VlanID: 100-130
                VlanMode: Trunk

# docker_registry is optional. It is not necessary unless you want to change the default location of the docker-registry.
# docker_registry dictionary contains information about the host, username, and password
# docker_registry is used to generate docker_registry.yaml
# docker_registry dictionary does not cross reference with other files 
docker_registry:
    docker_registry_host: localhost:5000
